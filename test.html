<html>
  <head>
    <title>观察will-change</title>
    <style></style>
  </head>

  <body>
    <script>
      let obj = {
        age: 18, // 声明的属性，属性描述符全是true
        name: "cbc",
        desc: "文字描述"
      };
      
      let temp = ""

      Object.defineProperty(obj, 'addr', {
        configurable: true,
        enumerable: true,
        get() {
          return temp;
        },
        set(val) {
          console.log('设置新值：', val)
          temp = val
        }
      })

      obj.addr = "广东省深圳市xxx"
      console.log(Object.getOwnPropertyDescriptor(obj, "addr"))

      Object.freeze(obj)
      console.log(Object.getOwnPropertyDescriptor(obj, "addr"))

      // 对象冻结之后再修改存取器会报错
      Object.defineProperty(obj, 'addr', {
        configurable: false,
        enumerable: true,
        get() {
          return temp;
        },
        set(val) {
          console.log('再次修改属性描述符，设置新值：', val)
          temp = val
        }
      })

      obj.addr = "广东省深圳市xxx----------2"
      console.log(Object.getOwnPropertyDescriptor(obj, "addr"))


      
    </script>
  </body>
</html>
